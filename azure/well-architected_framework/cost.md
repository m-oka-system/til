# コスト

不要は支出を削減し、投じるコストで運用効率を最大化する

## 設計原則

- PaaS/SaaS を使用する方がコスト効率が高い
- 初期コストを推定し、予算アラートを設定する
- Azure Advisor を使用して使用率が低いリソースを特定し動的に調整する
- 自動スケール前提の小さいインスタンスで構成する
- コスト管理を継続的に監視・最適化する

## デザイン

### Azure リージョン

- リージョンごとにコストが異なる
- リージョン、ゾーンを跨ぐトラフィックでは、より多くのコストが発生する

### Azure リソース

- SKU やサイズ、データ量、操作の単位に基づいて課金される
- 小さなサイズから始め、必要に応じてスケールアップする
- 割引価格を利用する
  - Azure の予約
  - 節約プラン
  - Spot インスタンス
  - ハイブリッド特典
  - Dev/Test 価格
- 自動シャットダウン
- 適切なストレージ層の選択（ライフサイクル）
- キャッシュサービスを使用してサーバの負荷を軽減

### ガバナンス

- Azure Policy でデプロイ可能なサイズを制御する
- タグ付けを強制してコストを追跡可能にしておく

### 初期見積もり

- Azure 料金計算ツール
- TCO 計算ツール
- Azure Migrate

### マネージドサービス

- Web サーバの VM -> Azure App Service
- SQL VM -> Azure SQL Database
- 踏み台 VM -> Azure Bastion
- 仮想ネットワークアプライアンス -> Azure Firewall

## モニター

### 予算とアラート

- 予算アラート
- 異常アラート

### レポート

- Azure Cost Management
- Azure Advisor

## トレードオフ

- コストの最適化と、セキュリティ・スケーラビリティ・信頼性はトレードオフの関係
- コストのみを優先せず、設計の他の側面と照らし合わせて検討する
- 原則、セキュリティについては妥協しない
