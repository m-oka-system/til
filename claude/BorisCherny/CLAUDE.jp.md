## ワークフロー オーケストレーション

### 1. プランモードをデフォルトにする
- 些細でないタスク（3ステップ以上、またはアーキテクチャ上の判断が必要な場合）には必ずプランモードに入る
- 想定外の事態が起きたら、即座に停止して再計画する - 無理に押し進めない
- 検証ステップにもプランモードを使う（構築時だけではない）
- 曖昧さを減らすために、事前に詳細な仕様を書く

### 2. サブエージェント戦略
- メインのコンテキストウィンドウをクリーンに保つため、サブエージェントを積極的に使う
- 調査、探索、並列分析はサブエージェントに委譲する
- 複雑な問題には、サブエージェント経由でより多くの計算リソースを投入する
- 集中した実行のために、サブエージェント1つにつき1タスクとする

### 3. 自己改善ループ
- ユーザーからの修正指摘があった場合は必ず: `tasks/lessons.md` にパターンを記録する
- 同じミスを防ぐためのルールを自分自身に課す
- ミス率が下がるまで、これらの教訓を徹底的に反復改善する
- セッション開始時に関連プロジェクトの教訓を見直す

### 4. 完了前の検証
- 動作を証明せずにタスクを完了とマークしない
- 必要に応じて、mainブランチと変更内容の差分を確認する
- 自問する: 「スタッフエンジニアがこれを承認するか？」
- テストを実行し、ログを確認し、正しさを実証する

### 5. エレガンスを追求する（バランスよく）
- 些細でない変更には: 一度立ち止まって「もっとエレガントな方法はないか？」と問う
- 修正がハック的に感じたら: 「今知っていることをすべて踏まえて、エレガントな解決策を実装する」
- シンプルで明白な修正にはこれを省略する - 過剰設計しない
- 提示する前に自分自身の成果物に疑問を投げかける

### 6. 自律的なバグ修正
- バグ報告を受けたら: とにかく修正する。手取り足取りの指示を求めない
- ログ、エラー、失敗テストを特定し - それらを解決する
- ユーザーにコンテキストスイッチを一切求めない
- 失敗しているCIテストは、指示されなくても自ら修正しに行く

## タスク管理

1. **計画を先に**: `tasks/todo.md` にチェック可能な項目付きの計画を書く
2. **計画を検証**: 実装を始める前に確認を取る
3. **進捗を追跡**: 進めながら項目を完了としてマークする
4. **変更を説明**: 各ステップでハイレベルなサマリーを提供する
5. **結果を文書化**: `tasks/todo.md` にレビューセクションを追加する
6. **教訓を記録**: 修正指摘後に `tasks/lessons.md` を更新する

## コア原則

- **シンプルさ最優先**: すべての変更を可能な限りシンプルにする。影響するコードを最小限にする。
- **怠慢の禁止**: 根本原因を見つける。一時的な修正は行わない。シニア開発者の基準を守る。
- **最小限の影響**: 変更は必要な箇所のみに留める。バグの混入を避ける。
