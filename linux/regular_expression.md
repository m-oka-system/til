## grep

```bash
# 文字列を含む行を出力
grep -n vmadmin /etc/passwd

# 文字列を含むファイル一覧を出力
grep example -rl .

# 代表的なオプション
-e 検索パターンを指定する
-i 大文字/小文字を区別しない
-v マッチしなかった行を表示
-E 拡張正規表現
-F 正規表現を使用しない
-o マッチした箇所のみ表示
-r 再帰的に検索する
-l マッチしたファイル名のみを表示

# 出力の書式に関するオプション
-n 行番号を表示
-H マッチしたファイルのファイル名を出力に含める
-h マッチしたファイルのファイル名を出力に含めない
-l マッチしたファイルのファイル名だけを出力する
-L マッチしていないファイルのファイル名だけを出力する
```

## 正規表現

```bash
# メタ文字はシングルクォートで括る(シェルに正規表現を展開させないようにするため)
ls /etc | grep '^cron'

## メタ文字
# 文字にマッチ
. 任意の1文字
[] カッコ内の中に含まれる、いずれかの1文字
[^ ] カッコ内の中に含まれない、いずれかの1文字
\ エスケープ

# 位置にマッチ
^ 行頭
$ 行末
^$ 空行　(-vオプションで空行を取り除いて表示)

# 繰り返しを指定
* 直前の文字が0回以上の繰り返し
.* 任意の文字列

# 拡張正規表現
+ 直前の文字が1回以上の繰り返し(0回は含まない)
? 0回または1回の繰り返し
{m,n} m回以上n回以下の繰り返し #基本正規表現 \{m,n\}
{m} ちょうどm回の繰り返し #基本正規表現 \{m\}
{m,} m回以上の繰り返し #基本正規表現 \{m,\}
() 単語をグループ化 #基本正規表現 \( \)
| 複数の正規表現をOR条件で連結

# 郵便番号を拡張正規表現で表現
[0-9]{3}-[0-9]{4}

# Wineという単語の2回以上の繰り返しにマッチ
grep -E '(Wine){2,}' drink.txt

# My Vodka または My Wineにマッチ
grep -E 'My (Vodka|Wine)' drink.txt
```
